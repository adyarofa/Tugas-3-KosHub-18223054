{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/allodyaq/Tugas-3-KosHub-18223054/koshub/app/accommodations/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { accommodationApi, bookingApi, accommodationAuthApi } from '../lib/api';\nimport { useAuth } from '../lib/AuthContext';\nimport type { Accommodation } from '../types';\nimport { Building2, MapPin, DollarSign, Users, Calendar, LogIn, UserPlus, ExternalLink, X, AlertCircle } from 'lucide-react';\nimport { format } from 'date-fns';\n\nexport default function AccommodationsPage() {\n  const router = useRouter();\n  const { isAuthenticated: isLivingSupportAuth } = useAuth();\n  const [accommodations, setAccommodations] = useState<Accommodation[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [selectedAccommodation, setSelectedAccommodation] = useState<Accommodation | null>(null);\n  const [bookingDates, setBookingDates] = useState({\n    start_date: '',\n    end_date: '',\n  });\n  const [bookingLoading, setBookingLoading] = useState(false);\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n\n  const [isAccommodationAuth, setIsAccommodationAuth] = useState(false);\n  const [accommodationUser, setAccommodationUser] = useState<any>(null);\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  const [authMode, setAuthMode] = useState<'login' | 'register'>('login');\n  const [authLoading, setAuthLoading] = useState(false);\n  const [authError, setAuthError] = useState('');\n  const [authForm, setAuthForm] = useState({\n    email: '',\n    password: '',\n    name: '',\n  });\n\n  useEffect(() => {\n    fetchAccommodations();\n    const isAuth = accommodationAuthApi.isAuthenticated();\n    setIsAccommodationAuth(isAuth);\n    if (isAuth) {\n      setAccommodationUser(accommodationAuthApi.getUser());\n    }\n  }, []);\n\n  const fetchAccommodations = async (showLoading = true) => {\n    if (showLoading) setLoading(true);\n    setError('');\n    try {\n      const data = await accommodationApi.getAll();\n      setAccommodations(Array.isArray(data) ? data : []);\n    } catch (err: any) {\n      console.error('Failed to load accommodations:', err);\n      if (accommodations.length === 0) {\n        setError('Unable to load accommodations. Please try again.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleBooking = async (accommodation: Accommodation) => {\n    if (!isLivingSupportAuth) {\n      router.push('/auth/login?redirect=/accommodations');\n      return;\n    }\n\n    if (!isAccommodationAuth) {\n      setSelectedAccommodation(accommodation);\n      setShowAuthModal(true);\n      return;\n    }\n\n    setSelectedAccommodation(accommodation);\n  };\n\n  const handleAccommodationAuth = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setAuthLoading(true);\n    setAuthError('');\n\n    try {\n      if (authMode === 'login') {\n        const response = await accommodationAuthApi.login({\n          email: authForm.email,\n          password: authForm.password,\n        });\n        accommodationAuthApi.saveAuth(response.access_token, response.user);\n        setIsAccommodationAuth(true);\n        setAccommodationUser(response.user);\n      } else {\n        const response = await accommodationAuthApi.register({\n          email: authForm.email,\n          password: authForm.password,\n          name: authForm.name,\n        });\n        accommodationAuthApi.saveAuth(response.access_token, response.user);\n        setIsAccommodationAuth(true);\n        setAccommodationUser(response.user);\n      }\n      setShowAuthModal(false);\n      setAuthForm({ email: '', password: '', name: '' });\n      // Keep selectedAccommodation so user can continue booking\n    } catch (err: any) {\n      setAuthError(err.response?.data?.message || err.response?.data?.error || 'Authentication failed. Please try again.');\n    } finally {\n      setAuthLoading(false);\n    }\n  };\n\n  const handleLogoutAccommodation = () => {\n    accommodationAuthApi.clearAuth();\n    setIsAccommodationAuth(false);\n    setAccommodationUser(null);\n  };\n\n  const submitBooking = async () => {\n    if (!selectedAccommodation) return;\n\n    if (!bookingDates.start_date || !bookingDates.end_date) {\n      alert('Please select both start and end dates');\n      return;\n    }\n\n    setBookingLoading(true);\n    try {\n      await bookingApi.create({\n        accommodation_id: selectedAccommodation.accommodation_id,\n        start_date: bookingDates.start_date,\n        end_date: bookingDates.end_date,\n      });\n      setShowSuccessModal(true);\n      setSelectedAccommodation(null);\n      setBookingDates({ start_date: '', end_date: '' });\n      setTimeout(() => {\n        setShowSuccessModal(false);\n      }, 3000);\n    } catch (err: any) {\n      alert(err.response?.data?.message || 'Failed to create booking');\n    } finally {\n      setBookingLoading(false);\n    }\n  };\n\n  const calculateDiscount = (price: number) => {\n    const discountRate = accommodationUser?.discount_rate || 0;\n    const discount = price * discountRate;\n    return { discount, finalPrice: price - discount };\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading accommodations...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-12\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center gap-2 bg-amber-100 text-amber-800 px-4 py-2 rounded-full text-sm font-medium mb-4\">\n            <ExternalLink size={16} />\n            External Partner Service\n          </div>\n          <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Browse Accommodations</h1>\n          <p className=\"text-xl text-gray-600 mb-4\">Find your perfect kos from our partner service</p>\n          <p className=\"text-sm text-gray-500 max-w-2xl mx-auto\">\n            This service connects to our partner's accommodation booking system.\n            You'll need to login/register separately to make bookings.\n          </p>\n        </div>\n\n        <div className=\"max-w-2xl mx-auto mb-8\">\n          {isAccommodationAuth ? (\n            <div className=\"bg-green-50 border border-green-200 rounded-xl p-4 flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white font-bold\">\n                  {accommodationUser?.name?.[0]?.toUpperCase() || accommodationUser?.email?.[0]?.toUpperCase() || 'U'}\n                </div>\n                <div>\n                  <p className=\"font-semibold text-green-800\">Logged in to Accommodation Service</p>\n                  <p className=\"text-sm text-green-600\">{accommodationUser?.email}</p>\n                  {accommodationUser?.membership_level && accommodationUser.membership_level !== 'BASIC' && (\n                    <span className=\"inline-block mt-1 bg-green-200 text-green-800 px-2 py-0.5 rounded-full text-xs font-semibold\">\n                      {accommodationUser.membership_level} - {(accommodationUser.discount_rate || 0) * 100}% discount\n                    </span>\n                  )}\n                </div>\n              </div>\n              <button\n                onClick={handleLogoutAccommodation}\n                className=\"text-green-700 hover:text-green-900 text-sm font-medium\"\n              >\n                Logout\n              </button>\n            </div>\n          ) : (\n            <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4\">\n              <div className=\"flex items-start gap-3\">\n                <AlertCircle className=\"text-amber-600 flex-shrink-0 mt-0.5\" size={20} />\n                <div className=\"flex-1\">\n                  <p className=\"font-semibold text-amber-800\">Login Required for Booking</p>\n                  <p className=\"text-sm text-amber-700 mt-1\">\n                    To book accommodations, you need to login or register with our partner's accommodation service.\n                    This is separate from your KosHub Living Support account.\n                  </p>\n                  <button\n                    onClick={() => {\n                      setShowAuthModal(true);\n                      setAuthMode('login');\n                    }}\n                    className=\"mt-3 inline-flex items-center gap-2 bg-amber-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-amber-700 transition-colors\"\n                  >\n                    <LogIn size={16} />\n                    Login to Accommodation Service\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {error && (\n          <div className=\"bg-amber-50 border border-amber-200 text-amber-700 px-4 py-3 rounded-lg mb-6 flex items-center justify-between\">\n            <span>{error}</span>\n            <button\n              onClick={() => fetchAccommodations()}\n              className=\"ml-4 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors text-sm font-medium\"\n            >\n              Retry\n            </button>\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n          {accommodations.map((accommodation) => {\n            const { discount, finalPrice } = calculateDiscount(accommodation.price);\n            return (\n              <div\n                key={accommodation.accommodation_id}\n                className=\"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow\"\n              >\n                <div className=\"h-48 bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center\">\n                  <Building2 className=\"text-white\" size={64} />\n                </div>\n                <div className=\"p-6\">\n                  <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">\n                    {accommodation.name}\n                  </h3>\n                  <div className=\"space-y-2 mb-4\">\n                    <div className=\"flex items-center text-gray-600\">\n                      <MapPin size={16} className=\"mr-2\" />\n                      <span className=\"text-sm\">{accommodation.address}, {accommodation.city}</span>\n                    </div>\n                    <div className=\"flex items-center text-gray-600\">\n                      <Users size={16} className=\"mr-2\" />\n                      <span className=\"text-sm\">\n                        {accommodation.available_units} / {accommodation.total_units} units available\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"border-t pt-4\">\n                    <div className=\"flex items-baseline gap-2 mb-2\">\n                      <DollarSign size={20} className=\"text-primary-600\" />\n                      {discount > 0 ? (\n                        <>\n                          <span className=\"text-gray-400 line-through text-lg\">\n                            Rp {accommodation.price.toLocaleString()}\n                          </span>\n                          <span className=\"text-2xl font-bold text-primary-600\">\n                            Rp {finalPrice.toLocaleString()}\n                          </span>\n                        </>\n                      ) : (\n                        <span className=\"text-2xl font-bold text-primary-600\">\n                          Rp {accommodation.price.toLocaleString()}\n                        </span>\n                      )}\n                      <span className=\"text-gray-500 text-sm\">/ month</span>\n                    </div>\n                    {discount > 0 && (\n                      <p className=\"text-sm text-green-600 font-semibold mb-4\">\n                        You save Rp {discount.toLocaleString()}!\n                      </p>\n                    )}\n                  </div>\n                  <button\n                    onClick={() => handleBooking(accommodation)}\n                    disabled={accommodation.available_units === 0}\n                    className=\"w-full bg-primary-600 text-white py-3 rounded-lg font-semibold hover:bg-primary-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n                  >\n                    {accommodation.available_units === 0 ? (\n                      'Fully Booked'\n                    ) : !isAccommodationAuth ? (\n                      <>\n                        <LogIn size={18} />\n                        Login to Book\n                      </>\n                    ) : (\n                      'Book Now'\n                    )}\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {accommodations.length === 0 && !loading && (\n          <div className=\"text-center py-12\">\n            <Building2 className=\"mx-auto text-gray-400 mb-4\" size={64} />\n            <p className=\"text-xl text-gray-600\">No accommodations available at the moment</p>\n          </div>\n        )}\n      </div>\n\n      {showAuthModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl max-w-md w-full p-8 relative\">\n            <button\n              onClick={() => {\n                setShowAuthModal(false);\n                setAuthError('');\n                setAuthForm({ email: '', password: '', name: '' });\n                if (!isAccommodationAuth) {\n                  setSelectedAccommodation(null);\n                }\n              }}\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600\"\n            >\n              <X size={24} />\n            </button>\n\n            <div className=\"text-center mb-6\">\n              <div className=\"inline-flex items-center justify-center w-16 h-16 bg-primary-100 rounded-full mb-4\">\n                <Building2 className=\"text-primary-600\" size={32} />\n              </div>\n              <h2 className=\"text-2xl font-bold text-gray-900\">\n                {authMode === 'login' ? 'Login to Accommodation Service' : 'Register for Accommodation Service'}\n              </h2>\n              <p className=\"text-sm text-gray-500 mt-2\">\n                This is our partner's booking system with separate authentication\n              </p>\n            </div>\n\n            {authError && (\n              <div className=\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg mb-4 text-sm\">\n                {authError}\n              </div>\n            )}\n\n            <form onSubmit={handleAccommodationAuth} className=\"space-y-4\">\n              {authMode === 'register' && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Name</label>\n                  <input\n                    type=\"text\"\n                    value={authForm.name}\n                    onChange={(e) => setAuthForm({ ...authForm, name: e.target.value })}\n                    required\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                    placeholder=\"Enter your name\"\n                  />\n                </div>\n              )}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email</label>\n                <input\n                  type=\"email\"\n                  value={authForm.email}\n                  onChange={(e) => setAuthForm({ ...authForm, email: e.target.value })}\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                  placeholder=\"Enter your email\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Password</label>\n                <input\n                  type=\"password\"\n                  value={authForm.password}\n                  onChange={(e) => setAuthForm({ ...authForm, password: e.target.value })}\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                  placeholder=\"Enter your password\"\n                />\n              </div>\n              <button\n                type=\"submit\"\n                disabled={authLoading}\n                className=\"w-full bg-primary-600 text-white py-3 rounded-lg font-semibold hover:bg-primary-700 transition-colors disabled:bg-gray-400 flex items-center justify-center gap-2\"\n              >\n                {authLoading ? (\n                  <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                ) : authMode === 'login' ? (\n                  <>\n                    <LogIn size={18} />\n                    Login\n                  </>\n                ) : (\n                  <>\n                    <UserPlus size={18} />\n                    Register\n                  </>\n                )}\n              </button>\n            </form>\n\n            <div className=\"mt-6 text-center\">\n              <p className=\"text-sm text-gray-600\">\n                {authMode === 'login' ? (\n                  <>\n                    Don't have an account?{' '}\n                    <button\n                      onClick={() => {\n                        setAuthMode('register');\n                        setAuthError('');\n                      }}\n                      className=\"text-primary-600 font-semibold hover:underline\"\n                    >\n                      Register here\n                    </button>\n                  </>\n                ) : (\n                  <>\n                    Already have an account?{' '}\n                    <button\n                      onClick={() => {\n                        setAuthMode('login');\n                        setAuthError('');\n                      }}\n                      className=\"text-primary-600 font-semibold hover:underline\"\n                    >\n                      Login here\n                    </button>\n                  </>\n                )}\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {selectedAccommodation && isAccommodationAuth && !showAuthModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl max-w-md w-full p-8\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Book {selectedAccommodation.name}</h2>\n            <div className=\"space-y-4 mb-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  <Calendar size={16} className=\"inline mr-1\" />\n                  Start Date\n                </label>\n                <input\n                  type=\"date\"\n                  value={bookingDates.start_date}\n                  onChange={(e) => setBookingDates({ ...bookingDates, start_date: e.target.value })}\n                  min={format(new Date(), 'yyyy-MM-dd')}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  <Calendar size={16} className=\"inline mr-1\" />\n                  End Date\n                </label>\n                <input\n                  type=\"date\"\n                  value={bookingDates.end_date}\n                  onChange={(e) => setBookingDates({ ...bookingDates, end_date: e.target.value })}\n                  min={bookingDates.start_date || format(new Date(), 'yyyy-MM-dd')}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                />\n              </div>\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <div className=\"flex justify-between mb-2\">\n                  <span className=\"text-gray-600\">Base Price:</span>\n                  <span className=\"font-semibold\">Rp {selectedAccommodation.price.toLocaleString()}</span>\n                </div>\n                {calculateDiscount(selectedAccommodation.price).discount > 0 && (\n                  <>\n                    <div className=\"flex justify-between mb-2\">\n                      <span className=\"text-gray-600\">Discount:</span>\n                      <span className=\"text-green-600 font-semibold\">\n                        - Rp {calculateDiscount(selectedAccommodation.price).discount.toLocaleString()}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between pt-2 border-t\">\n                      <span className=\"font-bold\">Final Price:</span>\n                      <span className=\"font-bold text-primary-600\">\n                        Rp {calculateDiscount(selectedAccommodation.price).finalPrice.toLocaleString()}\n                      </span>\n                    </div>\n                  </>\n                )}\n              </div>\n            </div>\n            <div className=\"flex gap-4\">\n              <button\n                onClick={() => {\n                  setSelectedAccommodation(null);\n                  setBookingDates({ start_date: '', end_date: '' });\n                }}\n                className=\"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={submitBooking}\n                disabled={bookingLoading}\n                className=\"flex-1 px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:bg-gray-400\"\n              >\n                {bookingLoading ? 'Booking...' : 'Confirm Booking'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showSuccessModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-xl shadow-lg p-8 max-w-sm w-full text-center animate-fade-in\">\n            <div className=\"flex items-center justify-center mb-4\">\n              <span className=\"inline-block bg-green-100 text-green-600 rounded-full p-3\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" /></svg>\n              </span>\n            </div>\n            <h3 className=\"text-2xl font-bold mb-2 text-green-700\">Booking Successful!</h3>\n            <p className=\"text-gray-700 mb-4\">Your accommodation has been booked successfully.</p>\n            <button\n              onClick={() => setShowSuccessModal(false)}\n              className=\"mt-2 px-6 py-2 bg-primary-600 text-white rounded-lg font-semibold hover:bg-primary-700 transition-colors\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}