{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/allodyaq/Tugas-3-KosHub-18223054/koshub/app/lib/api.ts"],"sourcesContent":["import axios from 'axios';\nimport type {\n  AuthResponse,\n  LoginCredentials,\n  RegisterData,\n  User,\n  Accommodation,\n  Booking,\n  CreateBookingData,\n  LaundryService,\n  CreateLaundryData,\n  CateringOrder,\n  CreateCateringData,\n  CateringMenu,\n  Notification,\n} from '../types';\nimport { UUID } from 'crypto';\n\nconst ACCOMMODATION_API = process.env.NEXT_PUBLIC_ACCOMMODATION_API || 'http://localhost:3000';\nconst LIVING_SUPPORT_API = process.env.NEXT_PUBLIC_LIVING_SUPPORT_API || 'http://localhost:3010';\n\nconst accommodationAxios = axios.create({\n  baseURL: ACCOMMODATION_API,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nconst livingSupportAxios = axios.create({\n  baseURL: LIVING_SUPPORT_API,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nlivingSupportAxios.interceptors.request.use(\n  (config: any) => {\n    const token = localStorage.getItem('access_token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error: any) => {\n    return Promise.reject(error);\n  }\n);\n\nlivingSupportAxios.interceptors.response.use(\n  (response: any) => {\n    return response;\n  },\n  (error: any) => {\n    if (error.response?.status !== 401) {\n      console.error('Living Support Error:', error.response?.status, error.config?.url);\n    }\n    return Promise.reject(error);\n  }\n);\n\naccommodationAxios.interceptors.request.use(\n  (config: any) => {\n    const token = localStorage.getItem('accommodation_token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error: any) => {\n    return Promise.reject(error);\n  }\n);\n\naccommodationAxios.interceptors.response.use(\n  (response: any) => {\n    return response;\n  },\n  (error: any) => {\n    if (error.response?.status !== 401) {\n      console.error('Accommodation Error:', error.response?.status, error.config?.url);\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const authApi = {\n  login: async (credentials: LoginCredentials): Promise<AuthResponse> => {\n    const { data } = await livingSupportAxios.post('/auth/login', credentials);\n    return {\n      access_token: data.access_token,\n      expires_in: data.expires_in || 3600,\n      user: data.user,\n    };\n  },\n\n  register: async (registerData: RegisterData): Promise<AuthResponse> => {\n    const { data } = await livingSupportAxios.post('/auth/register', registerData);\n    return {\n      access_token: data.session?.access_token || data.access_token,\n      expires_in: data.session?.expires_in || data.expires_in || 3600,\n      user: data.user,\n    };\n  },\n\n  changePassword: async (newPassword: string): Promise<{ message: string }> => {\n    const { data } = await livingSupportAxios.put('/auth/change-password', {\n      new_password: newPassword,\n    });\n    return data;\n  },\n};\n\nexport const accommodationAuthApi = {\n  login: async (credentials: LoginCredentials): Promise<AuthResponse> => {\n    const { data } = await accommodationAxios.post('/auth/login', credentials);\n    if (data.session && data.session.access_token) {\n      return {\n        access_token: data.session.access_token,\n        expires_in: data.session.expires_in || 3600,\n        user: data.session.user,\n      };\n    }\n    return data;\n  },\n\n  register: async (registerData: RegisterData): Promise<AuthResponse> => {\n    const { data } = await accommodationAxios.post('/auth/register', registerData);\n    if (data.session && data.session.access_token) {\n      return {\n        access_token: data.session.access_token,\n        expires_in: data.session.expires_in || 3600,\n        user: data.session.user,\n      };\n    }\n    return data;\n  },\n\n  isAuthenticated: (): boolean => {\n    return !!localStorage.getItem('accommodation_token');\n  },\n\n  getToken: (): string | null => {\n    return localStorage.getItem('accommodation_token');\n  },\n\n  saveAuth: (token: string, user: any) => {\n    localStorage.setItem('accommodation_token', token);\n    localStorage.setItem('accommodation_user', JSON.stringify(user));\n  },\n\n  clearAuth: () => {\n    localStorage.removeItem('accommodation_token');\n    localStorage.removeItem('accommodation_user');\n  },\n\n  getUser: () => {\n    const userData = localStorage.getItem('accommodation_user');\n    return userData ? JSON.parse(userData) : null;\n  },\n};\n\nexport const userApi = {\n  getById: async (userId: UUID): Promise<User> => {\n    const { data } = await accommodationAxios.get(`/users/${userId}`);\n    return data;\n  },\n};\n\nexport const accommodationApi = {\n  getAll: async (): Promise<Accommodation[]> => {\n    const { data } = await accommodationAxios.get('/accommodations');\n    return data;\n  },\n\n  getById: async (id: number): Promise<Accommodation> => {\n    const { data } = await accommodationAxios.get(`/accommodations/${id}`);\n    return data;\n  },\n\n  create: async (accommodation: Omit<Accommodation, 'accommodation_id'>): Promise<Accommodation> => {\n    const { data } = await accommodationAxios.post('/accommodations', accommodation);\n    return data;\n  },\n\n  update: async (id: number, accommodation: Partial<Accommodation>): Promise<Accommodation> => {\n    const { data } = await accommodationAxios.put(`/accommodations/${id}`, accommodation);\n    return data;\n  },\n\n  delete: async (id: number): Promise<{ message: string }> => {\n    const { data } = await accommodationAxios.delete(`/accommodations/${id}`);\n    return data;\n  },\n};\n\nexport const bookingApi = {\n  getAll: async (): Promise<Booking[]> => {\n    const { data } = await accommodationAxios.get('/bookings');\n    return data;\n  },\n\n  getMyBookings: async (): Promise<Booking[]> => {\n    const { data } = await accommodationAxios.get('/bookings');\n    return data;\n  },\n\n  getById: async (id: UUID): Promise<Booking> => {\n    const { data } = await accommodationAxios.get(`/bookings/${id}`);\n    return data;\n  },\n\n  create: async (bookingData: CreateBookingData): Promise<Booking> => {\n    const { data } = await accommodationAxios.post('/bookings', bookingData);\n    return data;\n  },\n\n  updateStatus: async (\n    id: number,\n    status: 'PENDING' | 'SUCCESS' | 'CANCELLED',\n    accommodationId: number\n  ): Promise<Booking> => {\n    const { data } = await accommodationAxios.put(\n      `/bookings/${id}`,\n      { status, accommodation_id: accommodationId }\n    );\n    return data;\n  },\n\n  delete: async (id: number): Promise<{ message: string }> => {\n    const { data } = await accommodationAxios.delete(`/bookings/${id}`);\n    return data;\n  },\n};\n\n// ============= Laundry Service API =============\nexport const laundryApi = {\n  getAll: async (): Promise<LaundryService[]> => {\n    const { data } = await livingSupportAxios.get('/api/laundry');\n    return data;\n  },\n\n  getById: async (id: number): Promise<LaundryService> => {\n    const { data } = await livingSupportAxios.get(`/api/laundry/${id}`);\n    return data;\n  },\n\n  createOrder: async (laundryData: CreateLaundryData & { booking_id: number }): Promise<LaundryService> => {\n    const { data } = await livingSupportAxios.post('/api/laundry', laundryData);\n    return data;\n  },\n\n  create: async (laundryData: CreateLaundryData): Promise<LaundryService> => {\n    const { data } = await livingSupportAxios.post('/api/laundry', laundryData);\n    return data;\n  },\n\n  update: async (id: number, updateData: Partial<CreateLaundryData>): Promise<LaundryService> => {\n    const { data } = await livingSupportAxios.put(`/api/laundry/${id}`, updateData);\n    return data;\n  },\n\n  updateStatus: async (\n    id: number,\n    status: LaundryService['status'],\n    delivery_date?: string,\n    delivery_time?: string\n  ): Promise<LaundryService> => {\n    const { data } = await livingSupportAxios.put(`/api/laundry/${id}/status`, {\n      status,\n      delivery_date,\n      delivery_time,\n    });\n    return data;\n  },\n\n  cancel: async (id: number): Promise<{ message: string }> => {\n    const { data } = await livingSupportAxios.delete(`/api/laundry/${id}`);\n    return data;\n  },\n};\n\nexport const cateringApi = {\n  getMenu: async (): Promise<CateringMenu> => {\n    console.log('Fetching menu from:', LIVING_SUPPORT_API + '/api/catering/menu');\n    const { data } = await livingSupportAxios.get('/api/catering/menu');\n    console.log('Raw menu response:', data);\n    const menu = data.menu || data;\n    console.log('Extracted menu:', menu);\n    return menu;\n  },\n\n  getAll: async (): Promise<CateringOrder[]> => {\n    const { data } = await livingSupportAxios.get('/api/catering');\n    return data;\n  },\n\n  getById: async (id: number): Promise<CateringOrder> => {\n    const { data } = await livingSupportAxios.get(`/api/catering/${id}`);\n    return data;\n  },\n\n  createOrder: async (cateringData: CreateCateringData & { booking_id: number }): Promise<CateringOrder> => {\n    const { data } = await livingSupportAxios.post('/api/catering', cateringData);\n    return data;\n  },\n\n  create: async (cateringData: CreateCateringData): Promise<CateringOrder> => {\n    const { data } = await livingSupportAxios.post('/api/catering', cateringData);\n    return data;\n  },\n\n  update: async (id: number, updateData: Partial<CreateCateringData>): Promise<CateringOrder> => {\n    const { data } = await livingSupportAxios.put(`/api/catering/${id}`, updateData);\n    return data;\n  },\n\n  updateStatus: async (id: number, status: CateringOrder['status']): Promise<CateringOrder> => {\n    const { data } = await livingSupportAxios.put(`/api/catering/${id}/status`, { status });\n    return data;\n  },\n\n  cancel: async (id: number): Promise<{ message: string }> => {\n    const { data } = await livingSupportAxios.delete(`/api/catering/${id}`);\n    return data;\n  },\n};\n\nexport const notificationApi = {\n  getAll: async (isRead?: boolean, limit = 50): Promise<Notification[]> => {\n    const params: any = { limit };\n    if (isRead !== undefined) {\n      params.is_read = isRead;\n    }\n    const { data } = await livingSupportAxios.get('/api/notifications', { params });\n    return data;\n  },\n\n  getUnreadCount: async (): Promise<{ unread_count: number }> => {\n    const { data } = await livingSupportAxios.get('/api/notifications/unread-count');\n    return data;\n  },\n\n  markAsRead: async (id: number): Promise<Notification> => {\n    const { data } = await livingSupportAxios.put(`/api/notifications/${id}/read`);\n    return data;\n  },\n\n  markAllAsRead: async (): Promise<{ message: string }> => {\n    const { data } = await livingSupportAxios.put('/api/notifications/read-all');\n    return data;\n  },\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":["file:///Users/allodyaq/Tugas-3-KosHub-18223054/koshub/app/lib/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { authApi } from './api';\nimport type { User, LoginCredentials, RegisterData } from '../types';\n\ninterface AuthContextType {\n  user: User | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  login: (credentials: LoginCredentials) => Promise<void>;\n  register: (data: RegisterData) => Promise<void>;\n  logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const token = localStorage.getItem('access_token');\n    const userData = localStorage.getItem('user');\n\n    if (token && userData) {\n      try {\n        setUser(JSON.parse(userData));\n      } catch (error) {\n        console.error('Failed to parse user data:', error);\n        localStorage.removeItem('access_token');\n        localStorage.removeItem('user');\n      }\n    }\n\n    setIsLoading(false);\n  }, []);\n\n  const login = async (credentials: LoginCredentials) => {\n    const response = await authApi.login(credentials);\n    localStorage.setItem('access_token', response.access_token);\n    localStorage.setItem('user', JSON.stringify(response.user));\n    setUser(response.user);\n  };\n\n  const register = async (data: RegisterData) => {\n    const response = await authApi.register(data);\n    localStorage.setItem('access_token', response.access_token);\n    localStorage.setItem('user', JSON.stringify(response.user));\n    setUser(response.user);\n  };\n\n  const logout = () => {\n    localStorage.removeItem('access_token');\n    localStorage.removeItem('user');\n    setUser(null);\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isAuthenticated: !!user,\n        isLoading,\n        login,\n        register,\n        logout,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAeA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,MAAM,WAAW,aAAa,OAAO,CAAC;QAEtC,IAAI,SAAS,UAAU;YACrB,IAAI;gBACF,QAAQ,KAAK,KAAK,CAAC;YACrB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,8BAA8B;gBAC5C,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;YAC1B;QACF;QAEA,aAAa;IACf,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO;QACnB,MAAM,WAAW,MAAM,4HAAO,CAAC,KAAK,CAAC;QACrC,aAAa,OAAO,CAAC,gBAAgB,SAAS,YAAY;QAC1D,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,SAAS,IAAI;QACzD,QAAQ,SAAS,IAAI;IACvB;IAEA,MAAM,WAAW,OAAO;QACtB,MAAM,WAAW,MAAM,4HAAO,CAAC,QAAQ,CAAC;QACxC,aAAa,OAAO,CAAC,gBAAgB,SAAS,YAAY;QAC1D,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,SAAS,IAAI;QACzD,QAAQ,SAAS,IAAI;IACvB;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,QAAQ;IACV;IAEA,qBACE,8OAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA,iBAAiB,CAAC,CAAC;YACnB;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 464, "column": 0}, "map": {"version":3,"sources":["file:///Users/allodyaq/Tugas-3-KosHub-18223054/koshub/app/components/Navbar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { useAuth } from '../lib/AuthContext';\nimport { Home, Building2, ShoppingBag, User, LogOut, Bell } from 'lucide-react';\nimport { useState, useEffect } from 'react';\nimport { notificationApi } from '../lib/api';\n\nexport default function Navbar() {\n  const { user, isAuthenticated, logout } = useAuth();\n  const [unreadCount, setUnreadCount] = useState(0);\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      fetchUnreadCount();\n      const interval = setInterval(fetchUnreadCount, 30000);\n      return () => clearInterval(interval);\n    }\n  }, [isAuthenticated]);\n\n  const fetchUnreadCount = async () => {\n    try {\n      const { unread_count } = await notificationApi.getUnreadCount();\n      setUnreadCount(unread_count);\n    } catch (error) {\n      setUnreadCount(0);\n    }\n  };\n\n  return (\n    <nav className=\"sticky top-0 z-50 shadow-lg bg-primary-900\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-20\">\n          <Link href=\"/\" className=\"flex items-center gap-3 group\">\n            <img\n              src=\"/image.png\"\n              alt=\"KosHub Logo\"\n              className=\"h-20 w-auto object-contain group-hover:scale-105 transition-transform\"\n            />\n          </Link>\n\n          <div className=\"hidden md:flex items-center gap-8\">\n            <Link\n              href=\"/\"\n              className=\"flex items-center gap-2 text-white/90 hover:text-white transition-colors font-medium\"\n            >\n              <Home size={18} />\n              <span>Home</span>\n            </Link>\n            {isAuthenticated && (\n              <>\n                <Link\n                  href=\"/services\"\n                  className=\"flex items-center gap-2 text-white/90 hover:text-white transition-colors font-medium\"\n                >\n                  <ShoppingBag size={18} />\n                  <span>Services</span>\n                </Link>\n                <Link\n                  href=\"/dashboard\"\n                  className=\"flex items-center gap-2 text-white/90 hover:text-white transition-colors font-medium\"\n                >\n                  <User size={18} />\n                  <span>Dashboard</span>\n                </Link>\n              </>\n            )}\n            <Link\n              href=\"/accommodations\"\n              className=\"flex items-center gap-2 text-white/90 hover:text-white transition-colors font-medium\"\n            >\n              <Building2 size={18} />\n              <span>Accommodations</span>\n            </Link>\n          </div>\n\n          {/* User Actions */}\n          <div className=\"flex items-center gap-4\">\n            {isAuthenticated ? (\n              <>\n                <Link\n                  href=\"/notifications\"\n                  className=\"relative p-2 text-white/90 hover:text-white transition-colors\"\n                >\n                  <Bell size={22} />\n                  {unreadCount > 0 && (\n                    <span className=\"absolute -top-1 -right-1 text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-lg border-2\" style={{ backgroundColor: '#ff2056', color: 'white', borderColor: '#8b0836' }}>\n                      {unreadCount > 9 ? '9+' : unreadCount}\n                    </span>\n                  )}\n                </Link>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"text-right hidden sm:block\">\n                    <p className=\"text-sm font-semibold text-white\">{user?.name || 'User'}</p>\n                    <p className=\"text-xs text-rose-200\">{user?.membership_level || 'BASIC'}</p>\n                  </div>\n                  <button\n                    onClick={logout}\n                    className=\"flex items-center gap-2 px-4 py-2 text-white/90 hover:text-white hover:bg-white/10 rounded-lg transition-all\"\n                  >\n                    <LogOut size={18} />\n                    <span className=\"hidden sm:inline font-medium\">Logout</span>\n                  </button>\n                </div>\n              </>\n            ) : (\n              <div className=\"flex items-center gap-3\">\n                <Link\n                  href=\"/auth/login\"\n                  className=\"px-5 py-2.5 text-white font-medium hover:bg-white/10 rounded-lg transition-all\"\n                >\n                  Login\n                </Link>\n                <Link\n                  href=\"/auth/register\"\n                  className=\"px-5 py-2.5 bg-white text-primary-900 font-semibold rounded-lg hover:bg-rose-50 transition-all shadow-lg\"\n                >\n                  Register\n                </Link>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,eAAe,EAAE,MAAM,EAAE,GAAG,IAAA,qIAAO;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,IAAA,kNAAS,EAAC;QACR,IAAI,iBAAiB;YACnB;YACA,MAAM,WAAW,YAAY,kBAAkB;YAC/C,OAAO,IAAM,cAAc;QAC7B;IACF,GAAG;QAAC;KAAgB;IAEpB,MAAM,mBAAmB;QACvB,IAAI;YACF,MAAM,EAAE,YAAY,EAAE,GAAG,MAAM,oIAAe,CAAC,cAAc;YAC7D,eAAe;QACjB,EAAE,OAAO,OAAO;YACd,eAAe;QACjB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,uKAAI;wBAAC,MAAK;wBAAI,WAAU;kCACvB,cAAA,8OAAC;4BACC,KAAI;4BACJ,KAAI;4BACJ,WAAU;;;;;;;;;;;kCAId,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAU;;kDAEV,8OAAC,2MAAI;wCAAC,MAAM;;;;;;kDACZ,8OAAC;kDAAK;;;;;;;;;;;;4BAEP,iCACC;;kDACE,8OAAC,uKAAI;wCACH,MAAK;wCACL,WAAU;;0DAEV,8OAAC,mOAAW;gDAAC,MAAM;;;;;;0DACnB,8OAAC;0DAAK;;;;;;;;;;;;kDAER,8OAAC,uKAAI;wCACH,MAAK;wCACL,WAAU;;0DAEV,8OAAC,0MAAI;gDAAC,MAAM;;;;;;0DACZ,8OAAC;0DAAK;;;;;;;;;;;;;;0CAIZ,8OAAC,uKAAI;gCACH,MAAK;gCACL,WAAU;;kDAEV,8OAAC,6NAAS;wCAAC,MAAM;;;;;;kDACjB,8OAAC;kDAAK;;;;;;;;;;;;;;;;;;kCAKV,8OAAC;wBAAI,WAAU;kCACZ,gCACC;;8CACE,8OAAC,uKAAI;oCACH,MAAK;oCACL,WAAU;;sDAEV,8OAAC,0MAAI;4CAAC,MAAM;;;;;;wCACX,cAAc,mBACb,8OAAC;4CAAK,WAAU;4CAAsH,OAAO;gDAAE,iBAAiB;gDAAW,OAAO;gDAAS,aAAa;4CAAU;sDAC/M,cAAc,IAAI,OAAO;;;;;;;;;;;;8CAIhC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAU;8DAAoC,MAAM,QAAQ;;;;;;8DAC/D,8OAAC;oDAAE,WAAU;8DAAyB,MAAM,oBAAoB;;;;;;;;;;;;sDAElE,8OAAC;4CACC,SAAS;4CACT,WAAU;;8DAEV,8OAAC,oNAAM;oDAAC,MAAM;;;;;;8DACd,8OAAC;oDAAK,WAAU;8DAA+B;;;;;;;;;;;;;;;;;;;yDAKrD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,uKAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;8CAGD,8OAAC,uKAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUjB"}}]
}